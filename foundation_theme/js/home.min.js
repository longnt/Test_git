var active_jcarousel_index=1;var scroller_auto=true;var scroller_auto_interval=9000;var scroller_intervalID;var $scroller_pages;jQuery(document).ready(function(){$scroller_pages=jQuery('#scroller_items .scroller-item');var tmp_size=$scroller_pages.length;jQuery('#scroller_nav').jcarousel({wrap:((tmp_size>5)?"circular":null),scroll:5,size:tmp_size,initCallback:scroller_initCallback,itemFirstInCallback:{onBeforeAnimation:scroller_itemFirstInCallback},buttonNextHTML:'<div id="scroller_next"></div>',buttonPrevHTML:'<div id="scroller_prev"></div>'});});function resume_slide(interval)
{window.clearInterval(scroller_intervalID);scroller_intervalID=window.setInterval(on_auto_next,interval);}
function pause_slide()
{window.clearInterval(scroller_intervalID);scroller_intervalID='';}
function on_auto_next()
{var tims=new Date();$('#timer').append('<span style="color:green">'+tims.getHours()+':'+tims.getMinutes()+':'+tims.getSeconds()+':'+tims.getMilliseconds()+'</span><br />');var carousel=jQuery('#scroller_nav').data('jcarousel');var scroller_size=carousel.size();var prev_index=active_jcarousel_index;var next_index=active_jcarousel_index+1;var prev_base_index=Math.abs(prev_index)%scroller_size;var next_base_index=Math.abs(next_index)%scroller_size;var $prev_li=jQuery('#scroller_nav li[jcarouselindex='+prev_index+']');var $next_li=null;jQuery('#scroller_nav a').removeClass('active');if(active_jcarousel_index%5==0){if(scroller_size<6){next_index=next_base_index;$next_li=jQuery('#scroller_nav li:first');$next_li.children('a').eq(0).addClass('active');scroller_item_transition(((prev_index-1)%scroller_size),((next_index-1)%scroller_size));}
else{carousel.next();}}
else{$next_li=$prev_li.next();$next_li.children('a').eq(0).addClass('active');jQuery('#scroller_nav li[jcarouselindex='+next_base_index+'] a').addClass('active');scroller_item_transition(((prev_index-1)%scroller_size),((next_index-1)%scroller_size));}
active_jcarousel_index=next_index;}
function scroller_item_transition(from,to)
{$scroller_pages.eq(to).show();$scroller_pages.eq(from).hide();}
function scroller_tab_click(self,index)
{var tims=new Date();$('#timer').append('<span style="color:blue">'+tims.getHours()+':'+tims.getMinutes()+':'+tims.getSeconds()+':'+tims.getMilliseconds()+'</span><br />');var carousel=jQuery('#scroller_nav').data('jcarousel');var scroller_size=carousel.size();var $self=jQuery(self);var $next_li=$self.parent();var prev_index=active_jcarousel_index;var next_index=parseInt($next_li.attr('jcarouselindex'));var prev_base_index=Math.abs(prev_index)%scroller_size;var next_base_index=index+1;if(prev_base_index==next_base_index)return;var $prev_li=jQuery('#scroller_nav li[jcarouselindex='+prev_index+']');jQuery('#scroller_nav a').removeClass('active');jQuery(self).addClass('active');jQuery('#scroller_nav li[jcarouselindex='+next_base_index+'] a').addClass('active');jQuery('#trans_from').text(prev_index);jQuery('#trans_to').text(next_index);scroller_item_transition(prev_base_index-1,index);active_jcarousel_index=next_index;}
function scroller_initCallback(carousel)
{jQuery('#scroller').hover(function(){if(scroller_auto){pause_slide();}},function(){if(scroller_auto){resume_slide(scroller_auto_interval);}});jQuery('#scroller_nav a').mouseenter(function(){if(!$(this).hasClass('active')){scroller_tab_click(this,this.getAttribute('id').substr(7));}});jQuery('#scroller_next,#scroller_prev').bind('click',function(){if(scroller_auto){scroller_auto=false;pause_slide();}});if(scroller_auto){resume_slide(scroller_auto_interval);}};function scroller_itemFirstInCallback(carousel,item,idx,state){if(scroller_auto)
{var scroller_size=carousel.size();var prev_index=idx-1;var next_index=idx;var prev_base_index=Math.abs(prev_index)%scroller_size;var next_base_index=(prev_base_index+1)%scroller_size;var ph=idx%scroller_size;scroller_item_transition(prev_base_index-1,next_base_index-1)
jQuery(item).children('a').addClass('active');jQuery('#scroller_nav li[jcarouselindex='+next_base_index+'] a').addClass('active');}};